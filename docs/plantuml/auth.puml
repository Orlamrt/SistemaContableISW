@startuml
title Módulo: Autenticación

rectangle "Front-End (UI)" {
  [Pantalla Login]
  [Pantalla Registro]
  [Recuperar Contraseña]
  [Reset Password]
}

rectangle "Back-End (Lógica)" {
  [AuthController]
  [PasswordResetService]
  [JWTService]
}

note right of [AuthController]
  Roles involucrados:
  * PUBLIC: acceso a login/registro
  * ADMIN/AUDITOR/CLIENTE/SOPORTE: `/auth/me`
end note

database "Base de Datos" {
  [users]
  [user_roles]
  [roles]
  [password_resets]
}

[Pantalla Login] --> [AuthController] : POST /auth/login
[Pantalla Registro] --> [AuthController] : POST /auth/register
[Recuperar Contraseña] --> [PasswordResetService] : POST /auth/recover
[Reset Password] --> [PasswordResetService] : POST /auth/reset-password

[AuthController] --> [users]
[AuthController] --> [user_roles]
[PasswordResetService] --> [password_resets]
[JWTService] --> [users]

@enduml
